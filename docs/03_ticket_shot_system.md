# チケット#03: ショットシステム実装

## 📋 概要
プレイヤーのショット（弾）システムを実装する。
タップ/クリック中の自動連射、弾の管理、描画処理を構築し、基本的な攻撃機能を完成させる。

## 🎯 完了条件
- タップ/クリック中に自動で弾が発射される
- 弾が上方向に直進する
- 複数の弾を同時に管理できる
- 画面外に出た弾が自動的に削除される
- サイバーパンクなネオンエフェクトで弾が描画される

## 📦 依存関係
- チケット#01（ゲーム基盤構築）が完了していること
- チケット#02（プレイヤーシステム）が完了していること

## ✅ コミット粒度のToDo

### 1. Bulletクラスの実装
- [x] `js/bullet.js` を作成
- [x] Bullet クラスの定義
- [x] 位置、速度、サイズの管理
- [x] 有効/無効フラグの管理
- [x] 弾の種類定義（後のレベルアップ対応用）

**コミットメッセージ例**: `feat: Bulletクラスの基本構造を実装`

### 2. 弾の描画処理
- [x] ネオンカラーの弾描画（シアン発光）
- [x] 弾の軌跡エフェクト
- [x] グロー効果の実装
- [x] 弾のサイズと形状の定義

**コミットメッセージ例**: `feat: サイバーパンク風の弾描画を実装`

### 3. BulletManagerクラスの実装
- [x] `js/bulletManager.js` を作成
- [x] 弾のオブジェクトプール実装
- [x] 弾の生成と削除の管理
- [x] アクティブな弾のリスト管理
- [x] メモリ効率的な弾の再利用システム

**コミットメッセージ例**: `feat: BulletManagerによる弾管理システムを実装`

### 4. 自動連射システム
- [x] 連射間隔の定義（フレーム単位）
- [x] 連射タイマーの管理
- [x] タップ/クリック状態の検知
- [x] 連射速度の調整機能

**コミットメッセージ例**: `feat: 自動連射システムを実装`

### 5. 弾の移動と更新処理
- [x] 弾の上方向移動処理
- [x] 移動速度の定義
- [x] 画面外判定と自動削除
- [x] フレーム毎の位置更新

**コミットメッセージ例**: `feat: 弾の移動と画面外削除を実装`

### 6. プレイヤーとの連携
- [x] プレイヤー位置からの弾発射
- [x] 発射位置のオフセット調整
- [x] プレイヤー状態による発射制御
- [x] input.js との連携

**コミットメッセージ例**: `feat: プレイヤーからの弾発射を連携`

### 7. パフォーマンス最適化
- [x] オブジェクトプールのサイズ調整
- [x] 不要な弾の早期削除
- [x] 描画処理の最適化
- [x] メモリリークの防止

**コミットメッセージ例**: `perf: 弾管理システムのパフォーマンスを最適化`

### 8. ゲームへの統合とテスト
- [x] game.js への統合
- [x] 更新・描画処理の呼び出し
- [x] デバッグ情報の表示（アクティブ弾数など）
- [x] 動作確認と調整

**コミットメッセージ例**: `feat: ショットシステムをゲームに統合`

## 🧪 テスト観点
- [ ] タップ/クリック中に連続して弾が発射されること
- [ ] 弾がプレイヤー位置から発射されること
- [ ] 弾が上方向にまっすぐ飛ぶこと
- [ ] 画面外に出た弾が削除されること
- [ ] 多数の弾を同時に表示してもパフォーマンスが落ちないこと
- [ ] タップを離すと発射が止まること
- [ ] スマートフォンとPCの両方で動作すること

## 📝 レビューポイント
- オブジェクトプールが効率的に実装されているか
- メモリリークが発生していないか
- 連射速度が適切か
- コードの拡張性（レベルアップ対応など）

## 🚀 次のチケットへの準備
このチケットが完了すると、敵キャラクターの実装（チケット#04）に着手できる状態になります。
プレイヤーの弾が敵に当たる処理は、チケット#06（当たり判定システム）で実装予定。