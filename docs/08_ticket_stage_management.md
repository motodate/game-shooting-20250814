# チケット#08: ステージ管理システム実装

## 📋 概要
3つのステージの進行管理と敵出現パターンを実装する。
各ステージ60秒の時間管理、ステージごとの敵出現パターン、ステージ遷移を構築する。

## 🎯 完了条件
- 3つのステージが順番に進行する
- 各ステージが60秒で次に進む
- ステージごとに敵の出現パターンが変わる
- ステージ3終了後にボス戦へ移行する
- ステージ番号と残り時間が表示される

## 📦 依存関係
- チケット#04（基本敵キャラクター）が完了していること
- チケット#05（敵キャラクター拡張）が完了していること

## ✅ コミット粒度のToDo

### 1. StageManagerクラスの実装
- [ ] `js/stageManager.js` を作成
- [ ] ステージ番号の管理（1〜3）
- [ ] ステージ時間の管理（60秒）
- [ ] ステージ状態の定義（PLAYING, TRANSITIONING, COMPLETE）

**コミットメッセージ例**: `feat: StageManagerクラスの基本構造を実装`

### 2. ステージ時間管理
- [ ] タイマーシステムの実装
- [ ] 60秒カウントダウン
- [ ] フレームベースの時間計測
- [ ] 残り時間の取得メソッド

**コミットメッセージ例**: `feat: ステージ時間管理システムを実装`

### 3. ステージ1の敵出現パターン
- [ ] 小型機の出現設定
- [ ] 中型機の出現設定
- [ ] 出現間隔の定義（易しめ）
- [ ] 出現位置のランダム化

**コミットメッセージ例**: `feat: ステージ1の敵出現パターンを実装`

### 4. ステージ2の敵出現パターン
- [ ] 小型機・中型機の出現頻度増加
- [ ] 大型機の追加
- [ ] 複数同時出現パターン
- [ ] 出現間隔の短縮

**コミットメッセージ例**: `feat: ステージ2の敵出現パターンを実装`

### 5. ステージ3の敵出現パターン
- [ ] 全敵タイプの出現
- [ ] 最高難度の出現頻度
- [ ] ウェーブ攻撃パターン
- [ ] ボス戦前の敵掃討

**コミットメッセージ例**: `feat: ステージ3の敵出現パターンを実装`

### 6. ステージ遷移処理
- [ ] ステージクリア判定
- [ ] 次ステージへの移行
- [ ] 遷移演出（フェードなど）
- [ ] プレイヤー状態の引き継ぎ

**コミットメッセージ例**: `feat: ステージ遷移システムを実装`

### 7. ステージUIの実装
- [ ] ステージ番号表示
- [ ] 残り時間表示
- [ ] ステージ開始メッセージ
- [ ] ステージクリアメッセージ

**コミットメッセージ例**: `feat: ステージ情報UIを実装`

### 8. EnemyManagerとの連携
- [ ] ステージに応じた敵生成
- [ ] 出現パターンの切り替え
- [ ] ボス戦への移行準備
- [ ] ゲームへの統合

**コミットメッセージ例**: `feat: ステージ管理をゲームシステムに統合`

## 🧪 テスト観点
- [ ] ステージが60秒で切り替わること
- [ ] ステージ1は小型機と中型機のみ出現すること
- [ ] ステージ2から大型機が出現すること
- [ ] ステージ3の敵出現頻度が最も高いこと
- [ ] ステージ番号と残り時間が表示されること
- [ ] ステージ3終了後にボス戦へ移行すること

## 📝 レビューポイント
- ステージ難易度の段階的上昇が適切か
- 敵出現パターンのバランス
- ステージ遷移がスムーズか
- コードの拡張性（ステージ追加など）

## 🚀 次のチケットへの準備
このチケットが完了すると、スコアシステム（チケット#09）でステージクリアボーナスなどを実装できます。